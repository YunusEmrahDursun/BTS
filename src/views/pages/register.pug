extends ../static-pages/layout-empty
block content
  .auth-main2.particles_js
    .auth_div.vivify.fadeInTop
      .card
        .body
          #tab1
            form.form-auth-small(novalidate data-parsley-validate onsubmit="return false" style="width: 350px;")
              h4(style="text-align: center;margin-bottom:20px")=title
              .form-group
                input.form-control.round(type='text'  placeholder='Katılım Linki' enforced=true ajax-key="l"  name='link' id="link")

              button.btn.btn-primary.btn-round.btn-block(onclick="checkLink()") Katıl
              button.btn.btn-primary.btn-round.btn-block(onclick="location.href='login'" ) Giriş
          #tab2(style="display:none") 
            form.form-auth-small(novalidate data-parsley-validate onsubmit="return false" style="width: 350px;")
              h4(style="text-align: center;margin-bottom:20px")=title
              .form-group
                input.form-control.round(style="margin-bottom:10px" type='text'  placeholder='İsim' enforced=true ajax-key="r"  name='kullanici_isim')
                input.form-control.round(style="margin-bottom:10px" type='text'  placeholder='Soy isim' enforced=true ajax-key="r"  name='kullanici_soyisim')
                input.form-control.phone-number.round(style="margin-bottom:10px" type='text'   placeholder='Telefon: +00 (000) 000-00-00' enforced=true ajax-key="r"  name='kullanici_telefon'  )
                input.form-control.round(style="margin-bottom:10px" type='text'  placeholder='Kullanıcı Adı' enforced=true ajax-key="r"  name='kullanici_adi')
                input.form-control.round(style="margin-bottom:10px" type='password'  placeholder='Parola' enforced=true ajax-key="r"  name='kullanici_parola')
                input.form-control.round(style="margin-bottom:10px" type='password'  placeholder='Parola Tekrar' enforced=true ajax-key="r"  name='kullanici_parola_tekrar')
              button.btn.btn-primary.btn-round.btn-block(onclick="register()") Kayıt Ol
          .pattern
            span.red
            span.indigo
            span.blue
            span.green
            span.orange
    #particles-js
      canvas.particles-js-canvas-el(width='1920' height='612' style='width: 100%; height: 100%;')
block javascript 
  script.
    function checkLink(){
      const data = Dynajax("checkJoinLink","l",null,null,true,null,false,false);
      if(data && data.status == 1){
        $("#tab1").hide();
        $("#tab2").show();
      }
    }
    function register(){
      Dynajax( 'register/'+$("#link").val(), 'r', ()=>{toLink("/web/login")} )
    }